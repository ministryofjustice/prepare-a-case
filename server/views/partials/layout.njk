{%- set displayDateFormat = 'D MMM YYYY' -%}
{% if user and user.username %}
    {%- set userName = user.username.replace('.', ' ') | properCase -%}
{% endif %}
<!DOCTYPE html>
<html lang="en" class="govuk-template no-js">
<head>

    {% set mainTitle = "Prepare a case for sentence" %}

    {% block head %}
        <meta charset="utf-8"/>

        <title>{{ title }} - {{ mainTitle }}</title>

        <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
        <meta name="theme-color" content="#0b0c0c"/>

        <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

        <link rel="shortcut icon" sizes="16x16 32x32 48x48" href="/assets/images/favicon.ico" type="image/x-icon"/>
        <link rel="mask-icon" href="/assets/images/govuk-mask-icon.svg" color="#0b0c0c">
        <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/govuk-apple-touch-icon-180x180.png">
        <link rel="apple-touch-icon" sizes="167x167" href="/assets/images/govuk-apple-touch-icon-167x167.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/govuk-apple-touch-icon-152x152.png">
        <link rel="apple-touch-icon" href="/assets/images/govuk-apple-touch-icon.png">

        <link type="text/css" rel="stylesheet" href="/stylesheets/style.min.css"/>

        <meta property="og:image" content="/assets/images/govuk-opengraph-image.png">

        <script src="/assets/accessible-autocomplete.min.js"></script>

        {% if analyticsCookies === 'accept' %}
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id={{ googleAnalyticsKey }}"></script>
        <script nonce="{{ nonce }}">
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', '{{ googleAnalyticsKey }}');

          // Feature detects Navigation Timing API support.
          if (window.performance) {
            // Gets the number of milliseconds since page load
            // (and rounds the result since the value must be an integer).
            var timeSincePageLoad = Math.round(performance.now());
            // Sends the timing event to Google Analytics.
            gtag('event', 'timing_complete', {
              'name': 'load',
              'value': timeSincePageLoad
            });
          }
        </script>
        {% endif %}
    {% endblock %}
</head>
<body class="govuk-template__body">

<script>
  document.body.classList.add('js-enabled')
</script>

<a href="#main-content" class="govuk-skip-link">Skip to main content</a>

{% block bodyStart %}
    {% block cookieBanner %}
        {% if not analyticsCookies %}
            {% from "govuk/components/cookie-banner/macro.njk" import govukCookieBanner %}

            {% set html %}
                <p>We use some essential cookies to make this service work.</p>
                <p>Weâ€™d also like to use analytics cookies so we can understand how you use the service and make
                    improvements.</p>
            {% endset %}
            <form action="/cookie-preference" method="post">
                {{ govukCookieBanner({
                    ariaLabel: "Cookies on Prepare a case for sentence",
                    messages: [
                        {
                            headingText: "Cookies on Prepare a case for sentence",
                            html: html,
                            actions: [
                            {
                                text: "Accept analytics cookies",
                                type: "submit",
                                name: "cookies",
                                value: "accept"
                            },
                            {
                                text: "Reject analytics cookies",
                                type: "submit",
                                name: "cookies",
                                value: "reject"
                            },
                            {
                                text: "View cookies",
                                href: "/cookies-policy",
                                classes: "govuk-link--no-visited-state"
                            }
                        ]
                        }
                    ]
                }) }}
            </form>
        {% endif %}
    {% endblock %}
{% endblock %}
{% block header %}
    {% include "./header.html" %}
{% endblock %}

{% block navigation %}
    {%- set currentCourtHtml %}
        <aside>
            <span class="qa-court-name govuk-body govuk-!-font-size-16 govuk-!-font-weight-bold">{{ params.courtName }}</span>
        </aside>
    {% endset -%}
    {%- from "moj/components/primary-navigation/macro.njk" import mojPrimaryNavigation -%}
    {{ mojPrimaryNavigation({
        label: 'Primary navigation',
        items: [
            {
                text: 'Cases',
                href: '/' + params.courtCode + '/cases',
                active: title === 'Cases'
            }
        ],
        searchHtml: currentCourtHtml
    }) }}
{% endblock %}

{% block keydetails %}{% endblock %}

<nav class="govuk-width-container" aria-label="Backwards navigation">
    {% block backlink %}{% endblock %}
</nav>

<div class="govuk-width-container">
    <main class="govuk-main-wrapper" id="main-content" role="main">
        {% block content %}{% endblock %}
    </main>
</div>

{% block footer %}
    {%- from "govuk/components/footer/macro.njk" import govukFooter -%}
    {{ govukFooter({
        meta: {
            items: [
                {
                    href: "/user-guide",
                    text: "User guide"
                },
                {
                    href: "/accessibility-statement",
                    text: "Accessibility statement"
                },
                {
                    href: "/cookies-policy",
                    text: "Cookies"
                 },
                 {
                    href: "/privacy-notice",
                    text: "Privacy"
                }
            ]
        }
    }) }}
{% endblock %}

{% block javascripts %}{% endblock %}

{% block bodyEnd %}
    <script src="/moj/all.js"></script>
    <script src="/govuk/all.js"></script>
    <script>window.GOVUKFrontend.initAll()</script>
{% endblock %}

</body>
</html>
