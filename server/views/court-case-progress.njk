<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h2 class="govuk-heading-m" id="caseHearingsHeading">Case progress</h2>
        {% if data.hearings | length %}
                {% if session.showPreviousHearings === data.caseId %}
                    {% set limitPreviousHearings = data.hearings | length %}
                {% else %}
                    {% set limitPreviousHearings = 6 %}
                {% endif %}
                {% for hearing in data.hearings | limit(limitPreviousHearings) %}
                    <div class="app-summary-card govuk-!-margin-bottom-5">
                        <header class="app-summary-card__header">
                            <div class="app-summary-card__title">
                                <span class="govuk-heading-s govuk-!-margin-bottom-0">{{ hearing.hearingTypeLabel }}</span>
                                <span class="govuk-body">
                                {{ hearing.hearingDateTime | caseCommentTimeFormat }}, Court {{ hearing.courtRoom }}, {{ hearing.session | lower }} session, {{ hearing.court }}
                            </span>
                            </div>
                        </header>

                        {%- from "components/case-notes/macro.njk" import pacCaseNotes -%}
                        {{ pacCaseNotes({
                            data: data,
                            hearing: hearing
                        }) }}
                    </div>
                {% endfor %}
            <form name="previousCommentsForm" id="caseHearingsForm" method="post" action="summary/hearings/{{ "hideOlderHearings" if session.showPreviousHearings === data.caseId else "showPreviousHearings"}}">

                <input type="hidden" name="caseId" value="{{ data.caseId }}"/>
                {% if data.hearings | length > limitPreviousHearings %}
                    <button type="submit" id="showPreviousHearings" class="govuk-button govuk-button--secondary">Show all previous hearings
                    </button>
                {% endif %}
                {% if session.showPreviousHearings === data.caseId %}
                    <button type="submit" id="showHideOlderHearings" class="govuk-button govuk-button--secondary">Hide older hearings
                    </button>
                {% endif %}
            </form>
            <form id="save-notes" action="summary/notes" method="post"></form>
        {% endif %}
    </div>
</div>